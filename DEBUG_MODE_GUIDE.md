# YellowBox Debug Mode 使用指南

## 概述

YellowBox 现在支持在 entries/[id] 页面显示详细的用户行为分析数据，通过添加 `?debug=true` 参数即可启用调试模式。

## 如何使用

### 1. 访问方式
在任何 YellowBox 条目详情页面的 URL 后添加 `?debug=true` 参数：

```
https://your-domain.com/yellowbox/entries/[entry-id]?debug=true
```

### 2. 功能特点

当启用 debug 模式时，页面会在主内容下方显示一个黄色的分析数据框，包含以下信息：

#### 📊 会话信息
- 会话 ID 和用户 ID
- 开始/结束时间
- 总时长和活跃写作时间

#### ⌨️ 打字模式
- 最近的按键记录
- 按键时间戳和类型
- 文本长度变化

#### ✏️ 编辑行为
- 退格次数
- 删除字符数
- 修改和粘贴次数

#### 🎯 用户交互
- 语音功能使用统计
- 界面元素交互（字体切换、语言切换等）
- 功能按钮点击次数

#### 📝 内容分析
- 字符数、单词数、句子数
- 平均句子长度
- 写作速度（字/分钟）

#### ⚡ 性能指标
- API 调用次数和响应时间
- 各类错误统计
- 平均响应时间

#### ⏸️ 写作停顿分析
- 停顿次数和时长分布
- 最长停顿时间
- 平均停顿时间

#### 📱 设备信息
- 屏幕分辨率
- 移动设备检测
- 浏览器信息

#### 🔒 隐私设置
- 分析数据收集同意状态
- 数据匿名化状态

### 3. 视觉设计

Debug 信息框采用与 YellowBox 一致的设计风格：
- 黄色圆角背景 (`bg-yellow-400`)
- 深色文字 (`text-[#3B3109]`)
- 分组展示，每个分类有浅黄色背景 (`bg-yellow-300`)
- 支持滚动查看大量数据
- 动画效果与主界面保持一致

### 4. 多语言支持

Debug 模式完全支持中英文切换：
- 中文界面显示中文标签和描述
- 英文界面显示英文标签和描述
- 语言切换与主界面同步

### 5. 数据可用性

- 只有包含 analytics 数据的条目才会显示详细信息
- 如果没有 analytics 数据，会显示"没有分析数据可显示"
- 数据格式化为易读的形式（时间、大小等）

## 开发者使用

### 调试用途
- 验证 analytics 数据是否正确收集
- 检查用户行为追踪功能
- 分析性能指标和错误率
- 验证数据完整性

### 数据分析
- 了解用户真实的写作习惯
- 识别界面交互热点
- 分析写作流程中的瓶颈
- 评估功能使用率

## 注意事项

1. **隐私考虑**: Debug 模式显示详细的用户行为数据，应谨慎在生产环境中使用
2. **性能影响**: Debug 组件会增加页面渲染负担，仅在需要时启用
3. **数据敏感性**: 某些 analytics 数据可能包含用户敏感信息，注意保护
4. **权限控制**: 在生产环境中，可考虑添加权限验证

## 示例 URL

```bash
# 正常访问条目
http://localhost:3003/yellowbox/entries/123

# 启用 debug 模式
http://localhost:3003/yellowbox/entries/123?debug=true
```

通过这个 debug 模式，开发者可以深入了解用户在 YellowBox 中的真实行为模式，为产品优化提供数据支持。